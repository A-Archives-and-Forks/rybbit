---
title: API Key Tracking
description: How to use API keys for tracking from any environment including localhost and server-side
---

# API Key Tracking

By default, Rybbit Analytics validates that tracking events come from your registered domain to prevent abuse. However, you may want to track events from other environments like localhost during development or from server-side applications.

## Enable API Key Tracking

To enable tracking with an API key, you'll need to:

1. Generate an API key for your site
2. Include the API key in your tracking requests

### Step 1: Generate an API Key

Make a POST request to generate an API key:

```bash
curl -X POST https://your-rybbit-instance.com/api/site/{siteId}/api-config \
  -H "Authorization: Bearer YOUR_AUTH_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"action": "generate_api_key"}'
```

This will return a secure random API key that you can use for tracking.

### Step 2: Include the API Key

Add the `data-api-key` attribute to your tracking script:

```html
<script 
  defer 
  src="https://your-rybbit-instance.com/script.js" 
  data-site-id="YOUR_SITE_ID" 
  data-api-key="YOUR_API_KEY">
</script>
```

## Managing API Configuration

### View Current Configuration

```bash
curl https://your-rybbit-instance.com/api/site/{siteId}/api-config \
  -H "Authorization: Bearer YOUR_AUTH_TOKEN"
```

### Revoke API Key

When you no longer need the API key, revoke it:

```bash
curl -X POST https://your-rybbit-instance.com/api/site/{siteId}/api-config \
  -H "Authorization: Bearer YOUR_AUTH_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"action": "revoke_api_key"}'
```

## Security Considerations

- **Keep API keys secret**: Treat them like passwords
- **Use environment variables**: Store API keys in environment variables, not in code
- **Revoke when compromised**: If an API key is exposed, revoke it immediately
- **Site IDs are predictable**: Since site IDs are incrementing numbers, the API key prevents unauthorized tracking
- **No origin restriction**: API keys bypass origin validation, allowing tracking from any source

## Common Use Cases

### Local Development
```html
<!-- For local development on localhost:3000 -->
<script 
  defer 
  src="https://analytics.example.com/script.js" 
  data-site-id="123" 
  data-api-key="your-api-key-here">
</script>
```

### CI/CD Testing
```javascript
// In your test environment
if (process.env.NODE_ENV === 'test') {
  window.RYBBIT_API_KEY = process.env.RYBBIT_API_KEY;
}
```

### Docker Development
```yaml
# docker-compose.yml
environment:
  - RYBBIT_SITE_ID=123
  - RYBBIT_API_KEY=${RYBBIT_API_KEY}
```

### Server-Side Tracking (Coming Soon)
API keys enable server-side tracking from your backend applications:

```javascript
// Node.js example
const response = await fetch('https://analytics.example.com/track', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    site_id: '123',
    api_key: process.env.RYBBIT_API_KEY,
    type: 'pageview',
    pathname: '/api/users',
    // ... other tracking data
  })
});
```

## Troubleshooting

### Events Not Tracking

1. Check that your API key is valid
2. Check browser console for any errors
3. Ensure you're using the correct site ID
4. Verify the API key hasn't been revoked

### Origin Errors

If you see "Origin mismatch" errors:
- Make sure you're including the API key in the script tag
- Verify the API key is correct and hasn't been revoked
- Check that the API key belongs to the correct site ID