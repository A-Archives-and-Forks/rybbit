"use strict";(()=>{var Hr=Object.defineProperty;var Kr=(t,e,r)=>e in t?Hr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var se=(t,e,r)=>Kr(t,typeof e!="symbol"?e+"":e,r);function zr(t){let e="__DOUBLE_ASTERISK_TOKEN__",r="__SINGLE_ASTERISK_TOKEN__",i=t.replace(/\*\*/g,e).replace(/\*/g,r).replace(/[.+?^${}()|[\]\\]/g,"\\$&");i=i.replace(new RegExp(`/${e}/`,"g"),"/(?:.+/)?"),i=i.replace(new RegExp(e,"g"),".*"),i=i.replace(/\//g,"\\/");let a=i.replace(new RegExp(r,"g"),"[^/]+");return new RegExp("^"+a+"$")}function Ct(t,e){for(let r of e)try{if(zr(r).test(t))return r}catch(n){console.error(`Invalid pattern: ${r}`,n)}return null}function Qt(t,e){let r=null;return(...n)=>{r&&clearTimeout(r),r=setTimeout(()=>t(...n),e)}}function jt(t){try{let e=window.location.hostname,r=new URL(t).hostname;return r!==e&&r!==""}catch{return!1}}function vt(t,e){if(!t)return e;try{let r=JSON.parse(t);return Array.isArray(e)&&!Array.isArray(r)?e:r}catch(r){return console.error("Error parsing JSON:",r),e}}function Xt(t){let e=t.getAttribute("src");if(!e)return console.error("Script src attribute is missing"),null;let r=e.split("/script.js")[0];if(!r)return console.error("Please provide a valid analytics host"),null;let n=t.getAttribute("data-site-id")||t.getAttribute("site-id");if(!n||isNaN(Number(n)))return console.error("Please provide a valid site ID using the data-site-id attribute"),null;let i=t.getAttribute("data-debounce")?Math.max(0,parseInt(t.getAttribute("data-debounce"))):500,a=vt(t.getAttribute("data-skip-patterns"),[]),l=vt(t.getAttribute("data-mask-patterns"),[]),s=t.getAttribute("data-api-key")||void 0,o=t.getAttribute("data-replay-batch-size")?Math.max(1,parseInt(t.getAttribute("data-replay-batch-size"))):3,c=t.getAttribute("data-replay-batch-interval")?Math.max(1e3,parseInt(t.getAttribute("data-replay-batch-interval"))):2e3;return console.info(t),{analyticsHost:r,siteId:n,debounceDuration:i,autoTrackPageview:t.getAttribute("data-auto-track-pageview")!=="false",autoTrackSpa:t.getAttribute("data-track-spa")!=="false",trackQuerystring:t.getAttribute("data-track-query")!=="false",trackOutbound:t.getAttribute("data-track-outbound")!=="false",enableWebVitals:t.getAttribute("data-web-vitals")==="true",trackErrors:t.getAttribute("data-track-errors")==="true",enableSessionReplay:t.getAttribute("data-session-replay")==="true",sessionReplayBatchSize:o,sessionReplayBatchInterval:c,skipPatterns:a,maskPatterns:l,apiKey:s}}var F;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(F||(F={}));function Yr(t){return t.nodeType===t.ELEMENT_NODE}function Ie(t){var e=t?.host;return e?.shadowRoot===t}function me(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function Jr(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t}function Qr(t){var e=t.cssText;if(e.split('"').length<3)return e;var r=["@import","url(".concat(JSON.stringify(t.href),")")];return t.layerName===""?r.push("layer"):t.layerName&&r.push("layer(".concat(t.layerName,")")),t.supportsText&&r.push("supports(".concat(t.supportsText,")")),t.media.length&&r.push(t.media.mediaText),r.join(" ")+";"}function Ze(t){try{var e=t.rules||t.cssRules;return e?Jr(Array.from(e).map(St).join("")):null}catch{return null}}function St(t){var e;if(Xr(t))try{e=Ze(t.styleSheet)||Qr(t)}catch{}return jr(e||t.cssText)}function jr(t){if(t.includes(":")){var e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}return t}function Xr(t){return"styleSheet"in t}var er=function(){function t(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return t.prototype.getId=function(e){var r;if(!e)return-1;var n=(r=this.getMeta(e))===null||r===void 0?void 0:r.id;return n??-1},t.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},t.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},t.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},t.prototype.removeNodeFromMap=function(e){var r=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach(function(i){return r.removeNodeFromMap(i)})},t.prototype.has=function(e){return this.idNodeMap.has(e)},t.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},t.prototype.add=function(e,r){var n=r.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,r)},t.prototype.replace=function(e,r){var n=this.getNode(e);if(n){var i=this.nodeMetaMap.get(n);i&&this.nodeMetaMap.set(r,i)}this.idNodeMap.set(e,r)},t.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},t}();function tr(){return new er}function xe(t){var e=t.element,r=t.maskInputOptions,n=t.tagName,i=t.type,a=t.value,l=t.maskInputFn,s=a||"",o=i&&le(i);return(r[n.toLowerCase()]||o&&r[o])&&(l?s=l(s,e):s="*".repeat(s.length)),s}function le(t){return t.toLowerCase()}var qt="__rrweb_original__";function qr(t){var e=t.getContext("2d");if(!e)return!0;for(var r=50,n=0;n<t.width;n+=r)for(var i=0;i<t.height;i+=r){var a=e.getImageData,l=qt in a?a[qt]:a,s=new Uint32Array(l.call(e,n,i,Math.min(r,t.width-n),Math.min(r,t.height-i)).data.buffer);if(s.some(function(o){return o!==0}))return!1}return!0}function Le(t){var e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?le(e):null}var $r=1,en=new RegExp("[^a-z0-9-_:]"),ye=-2;function bt(){return $r++}function tn(t){if(t instanceof HTMLFormElement)return"form";var e=le(t.tagName);return en.test(e)?"div":e}function rn(t){var e="";return t.indexOf("//")>-1?e=t.split("/").slice(0,3).join("/"):e=t.split("/")[0],e=e.split("?")[0],e}var be,$t,nn=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,on=/^(?:[a-z+]+:)?\/\//i,an=/^www\..*/i,sn=/^(data:)([^,]*),(.*)/i;function _e(t,e){return(t||"").replace(nn,function(r,n,i,a,l,s){var o=i||l||s,c=n||a||"";if(!o)return r;if(on.test(o)||an.test(o)||sn.test(o))return"url(".concat(c).concat(o).concat(c,")");if(o[0]==="/")return"url(".concat(c).concat(rn(e)+o).concat(c,")");var d=e.split("/"),u=o.split("/");d.pop();for(var f=0,p=u;f<p.length;f++){var h=p[f];h!=="."&&(h===".."?d.pop():d.push(h))}return"url(".concat(c).concat(d.join("/")).concat(c,")")})}var ln=/^[^ \t\n\r\u000c]+/,cn=/^[, \t\n\r\u000c]+/;function dn(t,e){if(e.trim()==="")return e;var r=0;function n(c){var d,u=c.exec(e.substring(r));return u?(d=u[0],r+=d.length,d):""}for(var i=[];n(cn),!(r>=e.length);){var a=n(ln);if(a.slice(-1)===",")a=Ae(t,a.substring(0,a.length-1)),i.push(a);else{var l="";a=Ae(t,a);for(var s=!1;;){var o=e.charAt(r);if(o===""){i.push((a+l).trim());break}else if(s)o===")"&&(s=!1);else if(o===","){r+=1,i.push((a+l).trim());break}else o==="("&&(s=!0);l+=o,r+=1}}}return i.join(", ")}function Ae(t,e){if(!e||e.trim()==="")return e;var r=t.createElement("a");return r.href=e,r.href}function un(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}function At(){var t=document.createElement("a");return t.href="",t.href}function wt(t,e,r,n){return n&&(r==="src"||r==="href"&&!(e==="use"&&n[0]==="#")||r==="xlink:href"&&n[0]!=="#"||r==="background"&&(e==="table"||e==="td"||e==="th")?Ae(t,n):r==="srcset"?dn(t,n):r==="style"?_e(n,At()):e==="object"&&r==="data"?Ae(t,n):n)}function kt(t,e,r){return(t==="video"||t==="audio")&&e==="autoplay"}function hn(t,e,r){try{if(typeof e=="string"){if(t.classList.contains(e))return!0}else for(var n=t.classList.length;n--;){var i=t.classList[n];if(e.test(i))return!0}if(r)return t.matches(r)}catch{}return!1}function Oe(t,e,r){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return r?Oe(t.parentNode,e,r):!1;for(var n=t.classList.length;n--;){var i=t.classList[n];if(e.test(i))return!0}return r?Oe(t.parentNode,e,r):!1}function Tt(t,e,r){try{var n=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(n===null)return!1;if(typeof e=="string"){if(n.classList.contains(e)||n.closest(".".concat(e)))return!0}else if(Oe(n,e,!0))return!0;if(r&&(n.matches(r)||n.closest(r)))return!0}catch{}return!1}function pn(t,e,r){var n=t.contentWindow;if(n){var i=!1,a;try{a=n.document.readyState}catch{return}if(a!=="complete"){var l=setTimeout(function(){i||(e(),i=!0)},r);t.addEventListener("load",function(){clearTimeout(l),i=!0,e()});return}var s="about:blank";if(n.location.href!==s||t.src===s||t.src==="")return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}}function fn(t,e,r){var n=!1,i;try{i=t.sheet}catch{return}if(!i){var a=setTimeout(function(){n||(e(),n=!0)},r);t.addEventListener("load",function(){clearTimeout(a),n=!0,e()})}}function gn(t,e){var r=e.doc,n=e.mirror,i=e.blockClass,a=e.blockSelector,l=e.maskTextClass,s=e.maskTextSelector,o=e.inlineStylesheet,c=e.maskInputOptions,d=c===void 0?{}:c,u=e.maskTextFn,f=e.maskInputFn,p=e.dataURLOptions,h=p===void 0?{}:p,g=e.inlineImages,I=e.recordCanvas,A=e.keepIframeSrcFn,y=e.newlyAddedElement,m=y===void 0?!1:y,R=mn(r,n);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:F.Document,childNodes:[],compatMode:t.compatMode}:{type:F.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:F.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:R};case t.ELEMENT_NODE:return In(t,{doc:r,blockClass:i,blockSelector:a,inlineStylesheet:o,maskInputOptions:d,maskInputFn:f,dataURLOptions:h,inlineImages:g,recordCanvas:I,keepIframeSrcFn:A,newlyAddedElement:m,rootId:R});case t.TEXT_NODE:return yn(t,{maskTextClass:l,maskTextSelector:s,maskTextFn:u,rootId:R});case t.CDATA_SECTION_NODE:return{type:F.CDATA,textContent:"",rootId:R};case t.COMMENT_NODE:return{type:F.Comment,textContent:t.textContent||"",rootId:R};default:return!1}}function mn(t,e){if(e.hasNode(t)){var r=e.getId(t);return r===1?void 0:r}}function yn(t,e){var r,n=e.maskTextClass,i=e.maskTextSelector,a=e.maskTextFn,l=e.rootId,s=t.parentNode&&t.parentNode.tagName,o=t.textContent,c=s==="STYLE"?!0:void 0,d=s==="SCRIPT"?!0:void 0;if(c&&o){try{t.nextSibling||t.previousSibling||!((r=t.parentNode.sheet)===null||r===void 0)&&r.cssRules&&(o=Ze(t.parentNode.sheet))}catch(u){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(u),t)}o=_e(o,At())}return d&&(o="SCRIPT_PLACEHOLDER"),!c&&!d&&o&&Tt(t,n,i)&&(o=a?a(o):o.replace(/[\S]/g,"*")),{type:F.Text,textContent:o||"",isStyle:c,rootId:l}}function In(t,e){for(var r=e.doc,n=e.blockClass,i=e.blockSelector,a=e.inlineStylesheet,l=e.maskInputOptions,s=l===void 0?{}:l,o=e.maskInputFn,c=e.dataURLOptions,d=c===void 0?{}:c,u=e.inlineImages,f=e.recordCanvas,p=e.keepIframeSrcFn,h=e.newlyAddedElement,g=h===void 0?!1:h,I=e.rootId,A=hn(t,n,i),y=tn(t),m={},R=t.attributes.length,O=0;O<R;O++){var B=t.attributes[O];kt(y,B.name,B.value)||(m[B.name]=wt(r,y,le(B.name),B.value))}if(y==="link"&&a){var D=Array.from(r.styleSheets).find(function(Q){return Q.href===t.href}),k=null;D&&(k=Ze(D)),k&&(delete m.rel,delete m.href,m._cssText=_e(k,D.href))}if(y==="style"&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){var k=Ze(t.sheet);k&&(m._cssText=_e(k,At()))}if(y==="input"||y==="textarea"||y==="select"){var K=t.value,P=t.checked;if(m.type!=="radio"&&m.type!=="checkbox"&&m.type!=="submit"&&m.type!=="button"&&K){var V=Le(t);m.value=xe({element:t,type:V,tagName:y,value:K,maskInputOptions:s,maskInputFn:o})}else P&&(m.checked=P)}if(y==="option"&&(t.selected&&!s.select?m.selected=!0:delete m.selected),y==="canvas"&&f){if(t.__context==="2d")qr(t)||(m.rr_dataURL=t.toDataURL(d.type,d.quality));else if(!("__context"in t)){var j=t.toDataURL(d.type,d.quality),z=document.createElement("canvas");z.width=t.width,z.height=t.height;var de=z.toDataURL(d.type,d.quality);j!==de&&(m.rr_dataURL=j)}}if(y==="img"&&u){be||(be=r.createElement("canvas"),$t=be.getContext("2d"));var E=t,H=E.crossOrigin;E.crossOrigin="anonymous";var X=function(){E.removeEventListener("load",X);try{be.width=E.naturalWidth,be.height=E.naturalHeight,$t.drawImage(E,0,0),m.rr_dataURL=be.toDataURL(d.type,d.quality)}catch(Q){console.warn("Cannot inline img src=".concat(E.currentSrc,"! Error: ").concat(Q))}H?m.crossOrigin=H:E.removeAttribute("crossorigin")};E.complete&&E.naturalWidth!==0?X():E.addEventListener("load",X)}if((y==="audio"||y==="video")&&(m.rr_mediaState=t.paused?"paused":"played",m.rr_mediaCurrentTime=t.currentTime),g||(t.scrollLeft&&(m.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(m.rr_scrollTop=t.scrollTop)),A){var q=t.getBoundingClientRect(),Y=q.width,J=q.height;m={class:m.class,rr_width:"".concat(Y,"px"),rr_height:"".concat(J,"px")}}return y==="iframe"&&!p(m.src)&&(t.contentDocument||(m.rr_src=m.src),delete m.src),{type:F.Element,tagName:y,attributes:m,childNodes:[],isSVG:un(t)||void 0,needBlock:A,rootId:I}}function T(t){return t==null?"":t.toLowerCase()}function Cn(t,e){if(e.comment&&t.type===F.Comment)return!0;if(t.type===F.Element){if(e.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")&&t.attributes.as==="script"||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&t.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&(T(t.attributes.name).match(/^msapplication-tile(image|color)$/)||T(t.attributes.name)==="application-name"||T(t.attributes.rel)==="icon"||T(t.attributes.rel)==="apple-touch-icon"||T(t.attributes.rel)==="shortcut icon")))return!0;if(t.tagName==="meta"){if(e.headMetaDescKeywords&&T(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(T(t.attributes.property).match(/^(og|twitter|fb):/)||T(t.attributes.name).match(/^(og|twitter):/)||T(t.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(T(t.attributes.name)==="robots"||T(t.attributes.name)==="googlebot"||T(t.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(T(t.attributes.name)==="author"||T(t.attributes.name)==="generator"||T(t.attributes.name)==="framework"||T(t.attributes.name)==="publisher"||T(t.attributes.name)==="progid"||T(t.attributes.property).match(/^article:/)||T(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(T(t.attributes.name)==="google-site-verification"||T(t.attributes.name)==="yandex-verification"||T(t.attributes.name)==="csrf-token"||T(t.attributes.name)==="p:domain_verify"||T(t.attributes.name)==="verify-v1"||T(t.attributes.name)==="verification"||T(t.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function ge(t,e){var r=e.doc,n=e.mirror,i=e.blockClass,a=e.blockSelector,l=e.maskTextClass,s=e.maskTextSelector,o=e.skipChild,c=o===void 0?!1:o,d=e.inlineStylesheet,u=d===void 0?!0:d,f=e.maskInputOptions,p=f===void 0?{}:f,h=e.maskTextFn,g=e.maskInputFn,I=e.slimDOMOptions,A=e.dataURLOptions,y=A===void 0?{}:A,m=e.inlineImages,R=m===void 0?!1:m,O=e.recordCanvas,B=O===void 0?!1:O,D=e.onSerialize,k=e.onIframeLoad,K=e.iframeLoadTimeout,P=K===void 0?5e3:K,V=e.onStylesheetLoad,j=e.stylesheetLoadTimeout,z=j===void 0?5e3:j,de=e.keepIframeSrcFn,E=de===void 0?function(){return!1}:de,H=e.newlyAddedElement,X=H===void 0?!1:H,q=e.preserveWhiteSpace,Y=q===void 0?!0:q,J=gn(t,{doc:r,mirror:n,blockClass:i,blockSelector:a,maskTextClass:l,maskTextSelector:s,inlineStylesheet:u,maskInputOptions:p,maskTextFn:h,maskInputFn:g,dataURLOptions:y,inlineImages:R,recordCanvas:B,keepIframeSrcFn:E,newlyAddedElement:X});if(!J)return console.warn(t,"not serialized"),null;var Q;n.hasNode(t)?Q=n.getId(t):Cn(J,I)||!Y&&J.type===F.Text&&!J.isStyle&&!J.textContent.replace(/^\s+|\s+$/gm,"").length?Q=ye:Q=bt();var M=Object.assign(J,{id:Q});if(n.add(t,M),Q===ye)return null;D&&D(t);var Se=!c;if(M.type===F.Element){Se=Se&&!M.needBlock,delete M.needBlock;var Ee=t.shadowRoot;Ee&&me(Ee)&&(M.isShadowHost=!0)}if((M.type===F.Document||M.type===F.Element)&&Se){I.headWhitespace&&M.type===F.Element&&M.tagName==="head"&&(Y=!1);for(var Ve={doc:r,mirror:n,blockClass:i,blockSelector:a,maskTextClass:l,maskTextSelector:s,skipChild:c,inlineStylesheet:u,maskInputOptions:p,maskTextFn:h,maskInputFn:g,slimDOMOptions:I,dataURLOptions:y,inlineImages:R,recordCanvas:B,preserveWhiteSpace:Y,onSerialize:D,onIframeLoad:k,iframeLoadTimeout:P,onStylesheetLoad:V,stylesheetLoadTimeout:z,keepIframeSrcFn:E},$=0,re=Array.from(t.childNodes);$<re.length;$++){var pe=re[$],ee=ge(pe,Ve);ee&&M.childNodes.push(ee)}if(Yr(t)&&t.shadowRoot)for(var C=0,_=Array.from(t.shadowRoot.childNodes);C<_.length;C++){var pe=_[C],ee=ge(pe,Ve);ee&&(me(t.shadowRoot)&&(ee.isShadow=!0),M.childNodes.push(ee))}}return t.parentNode&&Ie(t.parentNode)&&me(t.parentNode)&&(M.isShadow=!0),M.type===F.Element&&M.tagName==="iframe"&&pn(t,function(){var w=t.contentDocument;if(w&&k){var U=ge(w,{doc:w,mirror:n,blockClass:i,blockSelector:a,maskTextClass:l,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:p,maskTextFn:h,maskInputFn:g,slimDOMOptions:I,dataURLOptions:y,inlineImages:R,recordCanvas:B,preserveWhiteSpace:Y,onSerialize:D,onIframeLoad:k,iframeLoadTimeout:P,onStylesheetLoad:V,stylesheetLoadTimeout:z,keepIframeSrcFn:E});U&&k(t,U)}},P),M.type===F.Element&&M.tagName==="link"&&M.attributes.rel==="stylesheet"&&fn(t,function(){if(V){var w=ge(t,{doc:r,mirror:n,blockClass:i,blockSelector:a,maskTextClass:l,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:p,maskTextFn:h,maskInputFn:g,slimDOMOptions:I,dataURLOptions:y,inlineImages:R,recordCanvas:B,preserveWhiteSpace:Y,onSerialize:D,onIframeLoad:k,iframeLoadTimeout:P,onStylesheetLoad:V,stylesheetLoadTimeout:z,keepIframeSrcFn:E});w&&V(t,w)}},z),M}function rr(t,e){var r=e||{},n=r.mirror,i=n===void 0?new er:n,a=r.blockClass,l=a===void 0?"rr-block":a,s=r.blockSelector,o=s===void 0?null:s,c=r.maskTextClass,d=c===void 0?"rr-mask":c,u=r.maskTextSelector,f=u===void 0?null:u,p=r.inlineStylesheet,h=p===void 0?!0:p,g=r.inlineImages,I=g===void 0?!1:g,A=r.recordCanvas,y=A===void 0?!1:A,m=r.maskAllInputs,R=m===void 0?!1:m,O=r.maskTextFn,B=r.maskInputFn,D=r.slimDOM,k=D===void 0?!1:D,K=r.dataURLOptions,P=r.preserveWhiteSpace,V=r.onSerialize,j=r.onIframeLoad,z=r.iframeLoadTimeout,de=r.onStylesheetLoad,E=r.stylesheetLoadTimeout,H=r.keepIframeSrcFn,X=H===void 0?function(){return!1}:H,q=R===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:R===!1?{password:!0}:R,Y=k===!0||k==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:k==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:k===!1?{}:k;return ge(t,{doc:t,mirror:i,blockClass:l,blockSelector:o,maskTextClass:d,maskTextSelector:f,skipChild:!1,inlineStylesheet:h,maskInputOptions:q,maskTextFn:O,maskInputFn:B,slimDOMOptions:Y,dataURLOptions:K,inlineImages:I,recordCanvas:y,preserveWhiteSpace:P,onSerialize:V,onIframeLoad:j,iframeLoadTimeout:z,onStylesheetLoad:de,stylesheetLoadTimeout:E,keepIframeSrcFn:X,newlyAddedElement:!1})}var vn=/([^\\]):hover/,Yn=new RegExp(vn.source,"g");function G(t,e,r=document){let n={capture:!0,passive:!0};return r.addEventListener(t,e,n),()=>r.removeEventListener(t,e,n)}var we=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,nr={map:{},getId(){return console.error(we),-1},getNode(){return console.error(we),null},removeNodeFromMap(){console.error(we)},has(){return console.error(we),!1},reset(){console.error(we)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(nr=new Proxy(nr,{get(t,e,r){return e==="map"&&console.error(we),Reflect.get(t,e,r)}}));function ke(t,e,r={}){let n=null,i=0;return function(...a){let l=Date.now();!i&&r.leading===!1&&(i=l);let s=e-(l-i),o=this;s<=0||s>e?(n&&(clearTimeout(n),n=null),i=l,t.apply(o,a)):!n&&r.trailing!==!1&&(n=setTimeout(()=>{i=r.leading===!1?0:Date.now(),n=null,t.apply(o,a)},s))}}function Ce(t,e,r,n,i=window){let a=i.Object.getOwnPropertyDescriptor(t,e);return i.Object.defineProperty(t,e,n?r:{set(l){setTimeout(()=>{r.set.call(this,l)},0),a&&a.set&&a.set.call(this,l)}}),()=>Ce(t,e,a||{},!0)}function ne(t,e,r){try{if(!(e in t))return()=>{};let n=t[e],i=r(n);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:n}})),t[e]=i,()=>{t[e]=n}}catch{return()=>{}}}var Te=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Te=()=>new Date().getTime());function Ke(t){var e,r,n,i,a,l;let s=t.document;return{left:s.scrollingElement?s.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:s?.documentElement.scrollLeft||((r=(e=s?.body)===null||e===void 0?void 0:e.parentElement)===null||r===void 0?void 0:r.scrollLeft)||((n=s?.body)===null||n===void 0?void 0:n.scrollLeft)||0,top:s.scrollingElement?s.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:s?.documentElement.scrollTop||((a=(i=s?.body)===null||i===void 0?void 0:i.parentElement)===null||a===void 0?void 0:a.scrollTop)||((l=s?.body)===null||l===void 0?void 0:l.scrollTop)||0}}function ze(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Ye(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function x(t,e,r,n){if(!t)return!1;let i=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(!i)return!1;try{if(typeof e=="string"){if(i.classList.contains(e)||n&&i.closest("."+e)!==null)return!0}else if(Oe(i,e,n))return!0}catch{}return!!(r&&(i.matches(r)||n&&i.closest(r)!==null))}function ir(t,e){return e.getId(t)!==-1}function Je(t,e){return e.getId(t)===ye}function Rt(t,e){if(Ie(t))return!1;let r=e.getId(t);return e.has(r)?t.parentNode&&t.parentNode.nodeType===t.DOCUMENT_NODE?!1:t.parentNode?Rt(t.parentNode,e):!0:!0}function Qe(t){return!!t.changedTouches}function or(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let r=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function je(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))}function Xe(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function De(t){return!!t?.shadowRoot}var He=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var r;return(r=this.styleIDMap.get(e))!==null&&r!==void 0?r:-1}has(e){return this.styleIDMap.has(e)}add(e,r){if(this.has(e))return this.getId(e);let n;return r===void 0?n=this.id++:n=r,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function Mt(t){var e,r;let n=null;return((r=(e=t.getRootNode)===null||e===void 0?void 0:e.call(t))===null||r===void 0?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(n=t.getRootNode().host),n}function Sn(t){let e=t,r;for(;r=Mt(e);)e=r;return e}function bn(t){let e=t.ownerDocument;if(!e)return!1;let r=Sn(t);return e.contains(r)}function qe(t){let e=t.ownerDocument;return e?e.contains(t)||bn(t):!1}var b=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(b||{}),S=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t))(S||{}),Z=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(Z||{}),ie=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(ie||{}),ce=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(ce||{});function ar(t){return"__ln"in t}var Nt=class{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let n=0;n<e;n++)r=r?.next||null;return r}addNode(e){let r={value:e,previous:null,next:null};if(e.__ln=r,e.previousSibling&&ar(e.previousSibling)){let n=e.previousSibling.__ln.next;r.next=n,r.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(e.nextSibling&&ar(e.nextSibling)&&e.nextSibling.__ln.previous){let n=e.nextSibling.__ln.previous;r.previous=n,r.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=r,n&&(n.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;r.next===null&&(this.tail=r),this.length++}removeNode(e){let r=e.__ln;this.head&&(r.previous?(r.previous.next=r.next,r.next?r.next.previous=r.previous:this.tail=r.previous):(this.head=r.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}},sr=(t,e)=>`${t}@${e}`,$e=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let e=[],r=new Set,n=new Nt,i=o=>{let c=o,d=ye;for(;d===ye;)c=c&&c.nextSibling,d=c&&this.mirror.getId(c);return d},a=o=>{if(!o.parentNode||!qe(o))return;let c=Ie(o.parentNode)?this.mirror.getId(Mt(o)):this.mirror.getId(o.parentNode),d=i(o);if(c===-1||d===-1)return n.addNode(o);let u=ge(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{je(f,this.mirror)&&this.iframeManager.addIframe(f),Xe(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),De(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{this.iframeManager.attachIframe(f,p),this.shadowDomManager.observeAttachShadow(f)},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)}});u&&(e.push({parentId:c,nextId:d,node:u}),r.add(u.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let o of this.movedSet)lr(this.removes,o,this.mirror)&&!this.movedSet.has(o.parentNode)||a(o);for(let o of this.addedSet)!cr(this.droppedSet,o)&&!lr(this.removes,o,this.mirror)||cr(this.movedSet,o)?a(o):this.droppedSet.add(o);let l=null;for(;n.length;){let o=null;if(l){let c=this.mirror.getId(l.value.parentNode),d=i(l.value);c!==-1&&d!==-1&&(o=l)}if(!o){let c=n.tail;for(;c;){let d=c;if(c=c.previous,d){let u=this.mirror.getId(d.value.parentNode);if(i(d.value)===-1)continue;if(u!==-1){o=d;break}else{let p=d.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let h=p.parentNode.host;if(this.mirror.getId(h)!==-1){o=d;break}}}}}}if(!o){for(;n.head;)n.removeNode(n.head.value);break}l=o.previous,n.removeNode(o.value),a(o.value)}let s={texts:this.texts.map(o=>({id:this.mirror.getId(o.node),value:o.value})).filter(o=>!r.has(o.id)).filter(o=>this.mirror.has(o.id)),attributes:this.attributes.map(o=>{let{attributes:c}=o;if(typeof c.style=="string"){let d=JSON.stringify(o.styleDiff),u=JSON.stringify(o._unchangedStyles);d.length<c.style.length&&(d+u).split("var(").length===c.style.split("var(").length&&(c.style=o.styleDiff)}return{id:this.mirror.getId(o.node),attributes:c}}).filter(o=>!r.has(o.id)).filter(o=>this.mirror.has(o.id)),removes:this.removes,adds:e};!s.texts.length&&!s.attributes.length&&!s.removes.length&&!s.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=e=>{if(Je(e.target,this.mirror))return;let r;try{r=document.implementation.createHTMLDocument()}catch{r=this.doc}switch(e.type){case"characterData":{let n=e.target.textContent;!x(e.target,this.blockClass,this.blockSelector,!1)&&n!==e.oldValue&&this.texts.push({value:Tt(e.target,this.maskTextClass,this.maskTextSelector)&&n?this.maskTextFn?this.maskTextFn(n):n.replace(/[\S]/g,"*"):n,node:e.target});break}case"attributes":{let n=e.target,i=e.attributeName,a=e.target.getAttribute(i);if(i==="value"){let s=Le(n);a=xe({element:n,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:s,value:a,maskInputFn:this.maskInputFn})}if(x(e.target,this.blockClass,this.blockSelector,!1)||a===e.oldValue)return;let l=this.attributes.find(s=>s.node===e.target);if(n.tagName==="IFRAME"&&i==="src"&&!this.keepIframeSrcFn(a))if(!n.contentDocument)i="rr_src";else return;if(l||(l={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(l)),i==="type"&&n.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!kt(n.tagName,i)&&(l.attributes[i]=wt(this.doc,le(n.tagName),le(i),a),i==="style")){let s=r.createElement("span");e.oldValue&&s.setAttribute("style",e.oldValue);for(let o of Array.from(n.style)){let c=n.style.getPropertyValue(o),d=n.style.getPropertyPriority(o);c!==s.style.getPropertyValue(o)||d!==s.style.getPropertyPriority(o)?d===""?l.styleDiff[o]=c:l.styleDiff[o]=[c,d]:l._unchangedStyles[o]=[c,d]}for(let o of Array.from(s.style))n.style.getPropertyValue(o)===""&&(l.styleDiff[o]=!1)}break}case"childList":{if(x(e.target,this.blockClass,this.blockSelector,!0))return;e.addedNodes.forEach(n=>this.genAdds(n,e.target)),e.removedNodes.forEach(n=>{let i=this.mirror.getId(n),a=Ie(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);x(e.target,this.blockClass,this.blockSelector,!1)||Je(n,this.mirror)||!ir(n,this.mirror)||(this.addedSet.has(n)?(Et(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(e.target)&&i===-1||Rt(e.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[sr(i,a)]?Et(this.movedSet,n):this.removes.push({parentId:a,id:i,isShadow:Ie(e.target)&&me(e.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(e,r)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(Je(e,this.mirror))return;this.movedSet.add(e);let n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[sr(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);x(e,this.blockClass,this.blockSelector,!1)||(e.childNodes.forEach(n=>this.genAdds(n)),De(e)&&e.shadowRoot.childNodes.forEach(n=>{this.processedNodeManager.add(n,this),this.genAdds(n,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(r=>{this[r]=e[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function Et(t,e){t.delete(e),e.childNodes.forEach(r=>Et(t,r))}function lr(t,e,r){return t.length===0?!1:dr(t,e,r)}function dr(t,e,r){let{parentNode:n}=e;if(!n)return!1;let i=r.getId(n);return t.some(a=>a.id===i)?!0:dr(t,n,r)}function cr(t,e){return t.size===0?!1:ur(t,e)}function ur(t,e){let{parentNode:r}=e;return r?t.has(r)?!0:ur(t,r):!1}var Fe;function hr(t){Fe=t}function pr(){Fe=void 0}var v=t=>Fe?(...r)=>{try{return t(...r)}catch(n){if(Fe&&Fe(n)===!0)return;throw n}}:t;var he=[];function Be(t){try{if("composedPath"in t){let e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function Ot(t,e){var r,n;let i=new $e;he.push(i),i.init(t);let a=window.MutationObserver||window.__rrMutationObserver,l=(n=(r=window?.Zone)===null||r===void 0?void 0:r.__symbol__)===null||n===void 0?void 0:n.call(r,"MutationObserver");l&&window[l]&&(a=window[l]);let s=new a(v(i.processMutations.bind(i)));return s.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function An({mousemoveCb:t,sampling:e,doc:r,mirror:n}){if(e.mousemove===!1)return()=>{};let i=typeof e.mousemove=="number"?e.mousemove:50,a=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500,l=[],s,o=ke(v(u=>{let f=Date.now()-s;t(l.map(p=>(p.timeOffset-=f,p)),u),l=[],s=null}),a),c=v(ke(v(u=>{let f=Be(u),{clientX:p,clientY:h}=Qe(u)?u.changedTouches[0]:u;s||(s=Te()),l.push({x:p,y:h,id:n.getId(f),timeOffset:Te()-s}),o(typeof DragEvent<"u"&&u instanceof DragEvent?S.Drag:u instanceof MouseEvent?S.MouseMove:S.TouchMove)}),i,{trailing:!1})),d=[G("mousemove",c,r),G("touchmove",c,r),G("drag",c,r)];return v(()=>{d.forEach(u=>u())})}function wn({mouseInteractionCb:t,doc:e,mirror:r,blockClass:n,blockSelector:i,sampling:a}){if(a.mouseInteraction===!1)return()=>{};let l=a.mouseInteraction===!0||a.mouseInteraction===void 0?{}:a.mouseInteraction,s=[],o=null,c=d=>u=>{let f=Be(u);if(x(f,n,i,!0))return;let p=null,h=d;if("pointerType"in u){switch(u.pointerType){case"mouse":p=ie.Mouse;break;case"touch":p=ie.Touch;break;case"pen":p=ie.Pen;break}p===ie.Touch?Z[d]===Z.MouseDown?h="TouchStart":Z[d]===Z.MouseUp&&(h="TouchEnd"):ie.Pen}else Qe(u)&&(p=ie.Touch);p!==null?(o=p,(h.startsWith("Touch")&&p===ie.Touch||h.startsWith("Mouse")&&p===ie.Mouse)&&(p=null)):Z[d]===Z.Click&&(p=o,o=null);let g=Qe(u)?u.changedTouches[0]:u;if(!g)return;let I=r.getId(f),{clientX:A,clientY:y}=g;v(t)(Object.assign({type:Z[h],id:I,x:A,y},p!==null&&{pointerType:p}))};return Object.keys(Z).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&l[d]!==!1).forEach(d=>{let u=le(d),f=c(d);if(window.PointerEvent)switch(Z[d]){case Z.MouseDown:case Z.MouseUp:u=u.replace("mouse","pointer");break;case Z.TouchStart:case Z.TouchEnd:return}s.push(G(u,f,e))}),v(()=>{s.forEach(d=>d())})}function xt({scrollCb:t,doc:e,mirror:r,blockClass:n,blockSelector:i,sampling:a}){let l=v(ke(v(s=>{let o=Be(s);if(!o||x(o,n,i,!0))return;let c=r.getId(o);if(o===e&&e.defaultView){let d=Ke(e.defaultView);t({id:c,x:d.left,y:d.top})}else t({id:c,x:o.scrollLeft,y:o.scrollTop})}),a.scroll||100));return G("scroll",l,e)}function kn({viewportResizeCb:t},{win:e}){let r=-1,n=-1,i=v(ke(v(()=>{let a=ze(),l=Ye();(r!==a||n!==l)&&(t({width:Number(l),height:Number(a)}),r=a,n=l)}),200));return G("resize",i,e)}function fr(t,e){let r=Object.assign({},t);return e||delete r.userTriggered,r}var Tn=["INPUT","TEXTAREA","SELECT"],gr=new WeakMap;function Rn({inputCb:t,doc:e,mirror:r,blockClass:n,blockSelector:i,ignoreClass:a,ignoreSelector:l,maskInputOptions:s,maskInputFn:o,sampling:c,userTriggeredOnInput:d}){function u(y){let m=Be(y),R=y.isTrusted,O=m&&m.tagName;if(m&&O==="OPTION"&&(m=m.parentElement),!m||!O||Tn.indexOf(O)<0||x(m,n,i,!0)||m.classList.contains(a)||l&&m.matches(l))return;let B=m.value,D=!1,k=Le(m)||"";k==="radio"||k==="checkbox"?D=m.checked:(s[O.toLowerCase()]||s[k])&&(B=xe({element:m,maskInputOptions:s,tagName:O,type:k,value:B,maskInputFn:o})),f(m,v(fr)({text:B,isChecked:D,userTriggered:R},d));let K=m.name;k==="radio"&&K&&D&&e.querySelectorAll(`input[type="radio"][name="${K}"]`).forEach(P=>{P!==m&&f(P,v(fr)({text:P.value,isChecked:!D,userTriggered:!1},d))})}function f(y,m){let R=gr.get(y);if(!R||R.text!==m.text||R.isChecked!==m.isChecked){gr.set(y,m);let O=r.getId(y);v(t)(Object.assign(Object.assign({},m),{id:O}))}}let h=(c.input==="last"?["change"]:["input","change"]).map(y=>G(y,v(u),e)),g=e.defaultView;if(!g)return()=>{h.forEach(y=>y())};let I=g.Object.getOwnPropertyDescriptor(g.HTMLInputElement.prototype,"value"),A=[[g.HTMLInputElement.prototype,"value"],[g.HTMLInputElement.prototype,"checked"],[g.HTMLSelectElement.prototype,"value"],[g.HTMLTextAreaElement.prototype,"value"],[g.HTMLSelectElement.prototype,"selectedIndex"],[g.HTMLOptionElement.prototype,"selected"]];return I&&I.set&&h.push(...A.map(y=>Ce(y[0],y[1],{set(){v(u)({target:this,isTrusted:!1})}},!1,g))),v(()=>{h.forEach(y=>y())})}function rt(t){let e=[];function r(n,i){if(et("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||et("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||et("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||et("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){let l=Array.from(n.parentRule.cssRules).indexOf(n);i.unshift(l)}else if(n.parentStyleSheet){let l=Array.from(n.parentStyleSheet.cssRules).indexOf(n);i.unshift(l)}return i}return r(t,e)}function ue(t,e,r){let n,i;return t?(t.ownerNode?n=e.getId(t.ownerNode):i=r.getId(t),{styleId:i,id:n}):{}}function Mn({styleSheetRuleCb:t,mirror:e,stylesheetManager:r},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};let i=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:v((d,u,f)=>{let[p,h]=f,{id:g,styleId:I}=ue(u,e,r.styleMirror);return(g&&g!==-1||I&&I!==-1)&&t({id:g,styleId:I,adds:[{rule:p,index:h}]}),d.apply(u,f)})});let a=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(a,{apply:v((d,u,f)=>{let[p]=f,{id:h,styleId:g}=ue(u,e,r.styleMirror);return(h&&h!==-1||g&&g!==-1)&&t({id:h,styleId:g,removes:[{index:p}]}),d.apply(u,f)})});let l;n.CSSStyleSheet.prototype.replace&&(l=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(l,{apply:v((d,u,f)=>{let[p]=f,{id:h,styleId:g}=ue(u,e,r.styleMirror);return(h&&h!==-1||g&&g!==-1)&&t({id:h,styleId:g,replace:p}),d.apply(u,f)})}));let s;n.CSSStyleSheet.prototype.replaceSync&&(s=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(s,{apply:v((d,u,f)=>{let[p]=f,{id:h,styleId:g}=ue(u,e,r.styleMirror);return(h&&h!==-1||g&&g!==-1)&&t({id:h,styleId:g,replaceSync:p}),d.apply(u,f)})}));let o={};tt("CSSGroupingRule")?o.CSSGroupingRule=n.CSSGroupingRule:(tt("CSSMediaRule")&&(o.CSSMediaRule=n.CSSMediaRule),tt("CSSConditionRule")&&(o.CSSConditionRule=n.CSSConditionRule),tt("CSSSupportsRule")&&(o.CSSSupportsRule=n.CSSSupportsRule));let c={};return Object.entries(o).forEach(([d,u])=>{c[d]={insertRule:u.prototype.insertRule,deleteRule:u.prototype.deleteRule},u.prototype.insertRule=new Proxy(c[d].insertRule,{apply:v((f,p,h)=>{let[g,I]=h,{id:A,styleId:y}=ue(p.parentStyleSheet,e,r.styleMirror);return(A&&A!==-1||y&&y!==-1)&&t({id:A,styleId:y,adds:[{rule:g,index:[...rt(p),I||0]}]}),f.apply(p,h)})}),u.prototype.deleteRule=new Proxy(c[d].deleteRule,{apply:v((f,p,h)=>{let[g]=h,{id:I,styleId:A}=ue(p.parentStyleSheet,e,r.styleMirror);return(I&&I!==-1||A&&A!==-1)&&t({id:I,styleId:A,removes:[{index:[...rt(p),g]}]}),f.apply(p,h)})})}),v(()=>{n.CSSStyleSheet.prototype.insertRule=i,n.CSSStyleSheet.prototype.deleteRule=a,l&&(n.CSSStyleSheet.prototype.replace=l),s&&(n.CSSStyleSheet.prototype.replaceSync=s),Object.entries(o).forEach(([d,u])=>{u.prototype.insertRule=c[d].insertRule,u.prototype.deleteRule=c[d].deleteRule})})}function Lt({mirror:t,stylesheetManager:e},r){var n,i,a;let l=null;r.nodeName==="#document"?l=t.getId(r):l=t.getId(r.host);let s=r.nodeName==="#document"?(n=r.defaultView)===null||n===void 0?void 0:n.Document:(a=(i=r.ownerDocument)===null||i===void 0?void 0:i.defaultView)===null||a===void 0?void 0:a.ShadowRoot,o=Object.getOwnPropertyDescriptor(s?.prototype,"adoptedStyleSheets");return l===null||l===-1||!s||!o?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){var c;return(c=o.get)===null||c===void 0?void 0:c.call(this)},set(c){var d;let u=(d=o.set)===null||d===void 0?void 0:d.call(this,c);if(l!==null&&l!==-1)try{e.adoptStyleSheets(c,l)}catch{}return u}}),v(()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))}function Nn({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:r,stylesheetManager:n},{win:i}){let a=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:v((s,o,c)=>{var d;let[u,f,p]=c;if(r.has(u))return a.apply(o,[u,f,p]);let{id:h,styleId:g}=ue((d=o.parentRule)===null||d===void 0?void 0:d.parentStyleSheet,e,n.styleMirror);return(h&&h!==-1||g&&g!==-1)&&t({id:h,styleId:g,set:{property:u,value:f,priority:p},index:rt(o.parentRule)}),s.apply(o,c)})});let l=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(l,{apply:v((s,o,c)=>{var d;let[u]=c;if(r.has(u))return l.apply(o,[u]);let{id:f,styleId:p}=ue((d=o.parentRule)===null||d===void 0?void 0:d.parentStyleSheet,e,n.styleMirror);return(f&&f!==-1||p&&p!==-1)&&t({id:f,styleId:p,remove:{property:u},index:rt(o.parentRule)}),s.apply(o,c)})}),v(()=>{i.CSSStyleDeclaration.prototype.setProperty=a,i.CSSStyleDeclaration.prototype.removeProperty=l})}function En({mediaInteractionCb:t,blockClass:e,blockSelector:r,mirror:n,sampling:i,doc:a}){let l=v(o=>ke(v(c=>{let d=Be(c);if(!d||x(d,e,r,!0))return;let{currentTime:u,volume:f,muted:p,playbackRate:h}=d;t({type:o,id:n.getId(d),currentTime:u,volume:f,muted:p,playbackRate:h})}),i.media||500)),s=[G("play",l(0),a),G("pause",l(1),a),G("seeked",l(2),a),G("volumechange",l(3),a),G("ratechange",l(4),a)];return v(()=>{s.forEach(o=>o())})}function On({fontCb:t,doc:e}){let r=e.defaultView;if(!r)return()=>{};let n=[],i=new WeakMap,a=r.FontFace;r.FontFace=function(o,c,d){let u=new a(o,c,d);return i.set(u,{family:o,buffer:typeof c!="string",descriptors:d,fontSource:typeof c=="string"?c:JSON.stringify(Array.from(new Uint8Array(c)))}),u};let l=ne(e.fonts,"add",function(s){return function(o){return setTimeout(v(()=>{let c=i.get(o);c&&(t(c),i.delete(o))}),0),s.apply(this,[o])}});return n.push(()=>{r.FontFace=a}),n.push(l),v(()=>{n.forEach(s=>s())})}function xn(t){let{doc:e,mirror:r,blockClass:n,blockSelector:i,selectionCb:a}=t,l=!0,s=v(()=>{let o=e.getSelection();if(!o||l&&o?.isCollapsed)return;l=o.isCollapsed||!1;let c=[],d=o.rangeCount||0;for(let u=0;u<d;u++){let f=o.getRangeAt(u),{startContainer:p,startOffset:h,endContainer:g,endOffset:I}=f;x(p,n,i,!0)||x(g,n,i,!0)||c.push({start:r.getId(p),startOffset:h,end:r.getId(g),endOffset:I})}a({ranges:c})});return s(),G("selectionchange",s)}function Ln(t,e){let{mutationCb:r,mousemoveCb:n,mouseInteractionCb:i,scrollCb:a,viewportResizeCb:l,inputCb:s,mediaInteractionCb:o,styleSheetRuleCb:c,styleDeclarationCb:d,canvasMutationCb:u,fontCb:f,selectionCb:p}=t;t.mutationCb=(...h)=>{e.mutation&&e.mutation(...h),r(...h)},t.mousemoveCb=(...h)=>{e.mousemove&&e.mousemove(...h),n(...h)},t.mouseInteractionCb=(...h)=>{e.mouseInteraction&&e.mouseInteraction(...h),i(...h)},t.scrollCb=(...h)=>{e.scroll&&e.scroll(...h),a(...h)},t.viewportResizeCb=(...h)=>{e.viewportResize&&e.viewportResize(...h),l(...h)},t.inputCb=(...h)=>{e.input&&e.input(...h),s(...h)},t.mediaInteractionCb=(...h)=>{e.mediaInteaction&&e.mediaInteaction(...h),o(...h)},t.styleSheetRuleCb=(...h)=>{e.styleSheetRule&&e.styleSheetRule(...h),c(...h)},t.styleDeclarationCb=(...h)=>{e.styleDeclaration&&e.styleDeclaration(...h),d(...h)},t.canvasMutationCb=(...h)=>{e.canvasMutation&&e.canvasMutation(...h),u(...h)},t.fontCb=(...h)=>{e.font&&e.font(...h),f(...h)},t.selectionCb=(...h)=>{e.selection&&e.selection(...h),p(...h)}}function mr(t,e={}){let r=t.doc.defaultView;if(!r)return()=>{};Ln(t,e);let n=Ot(t,t.doc),i=An(t),a=wn(t),l=xt(t),s=kn(t,{win:r}),o=Rn(t),c=En(t),d=Mn(t,{win:r}),u=Lt(t,t.doc),f=Nn(t,{win:r}),p=t.collectFonts?On(t):()=>{},h=xn(t),g=[];for(let I of t.plugins)g.push(I.observer(I.callback,r,I.options));return v(()=>{he.forEach(I=>I.reset()),n.disconnect(),i(),a(),l(),s(),o(),c(),d(),u(),f(),p(),h(),g.forEach(I=>I())})}function et(t){return typeof window[t]<"u"}function tt(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}var We=class{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,r,n,i){let a=n||this.getIdToRemoteIdMap(e),l=i||this.getRemoteIdToIdMap(e),s=a.get(r);return s||(s=this.generateIdFn(),a.set(r,s),l.set(s,r)),s}getIds(e,r){let n=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return r.map(a=>this.getId(e,a,n,i))}getRemoteId(e,r,n){let i=n||this.getRemoteIdToIdMap(e);if(typeof r!="number")return r;let a=i.get(r);return a||-1}getRemoteIds(e,r){let n=this.getRemoteIdToIdMap(e);return r.map(i=>this.getRemoteId(e,i,n))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let r=this.iframeIdToRemoteIdMap.get(e);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(e,r)),r}getRemoteIdToIdMap(e){let r=this.iframeRemoteIdToIdMap.get(e);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(e,r)),r}};var nt=class{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new We(bt),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new We(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,r){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(n=this.loadListener)===null||n===void 0||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){let r=e;if(r.data.type!=="rrweb"||r.origin!==r.data.origin||!e.source)return;let i=this.crossOriginIframeMap.get(e.source);if(!i)return;let a=this.transformCrossOriginEvent(i,r.data.event);a&&this.wrappedEmit(a,r.data.isCheckout)}transformCrossOriginEvent(e,r){var n;switch(r.type){case b.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(r.data.node,e);let i=r.data.node.id;return this.crossOriginIframeRootIdMap.set(e,i),this.patchRootIdOnNode(r.data.node,i),{timestamp:r.timestamp,type:b.IncrementalSnapshot,data:{source:S.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case b.Meta:case b.Load:case b.DomContentLoaded:return!1;case b.Plugin:return r;case b.Custom:return this.replaceIds(r.data.payload,e,["id","parentId","previousId","nextId"]),r;case b.IncrementalSnapshot:switch(r.data.source){case S.Mutation:return r.data.adds.forEach(i=>{this.replaceIds(i,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(i.node,e);let a=this.crossOriginIframeRootIdMap.get(e);a&&this.patchRootIdOnNode(i.node,a)}),r.data.removes.forEach(i=>{this.replaceIds(i,e,["parentId","id"])}),r.data.attributes.forEach(i=>{this.replaceIds(i,e,["id"])}),r.data.texts.forEach(i=>{this.replaceIds(i,e,["id"])}),r;case S.Drag:case S.TouchMove:case S.MouseMove:return r.data.positions.forEach(i=>{this.replaceIds(i,e,["id"])}),r;case S.ViewportResize:return!1;case S.MediaInteraction:case S.MouseInteraction:case S.Scroll:case S.CanvasMutation:case S.Input:return this.replaceIds(r.data,e,["id"]),r;case S.StyleSheetRule:case S.StyleDeclaration:return this.replaceIds(r.data,e,["id"]),this.replaceStyleIds(r.data,e,["styleId"]),r;case S.Font:return r;case S.Selection:return r.data.ranges.forEach(i=>{this.replaceIds(i,e,["start","end"])}),r;case S.AdoptedStyleSheet:return this.replaceIds(r.data,e,["id"]),this.replaceStyleIds(r.data,e,["styleIds"]),(n=r.data.styles)===null||n===void 0||n.forEach(i=>{this.replaceStyleIds(i,e,["styleId"])}),r}}}replace(e,r,n,i){for(let a of i)!Array.isArray(r[a])&&typeof r[a]!="number"||(Array.isArray(r[a])?r[a]=e.getIds(n,r[a]):r[a]=e.getId(n,r[a]));return r}replaceIds(e,r,n){return this.replace(this.crossOriginIframeMirror,e,r,n)}replaceStyleIds(e,r,n){return this.replace(this.crossOriginIframeStyleMirror,e,r,n)}replaceIdOnNode(e,r){this.replaceIds(e,r,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(n=>{this.replaceIdOnNode(n,r)})}patchRootIdOnNode(e,r){e.type!==F.Document&&!e.rootId&&(e.rootId=r),"childNodes"in e&&e.childNodes.forEach(n=>{this.patchRootIdOnNode(n,r)})}};var it=class{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,r){if(!me(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);let n=Ot(Object.assign(Object.assign({},this.bypassOptions),{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(xt(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Lt({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,r){let n=this;this.restoreHandlers.push(ne(e.prototype,"attachShadow",function(i){return function(a){let l=i.call(this,a);return this.shadowRoot&&qe(this)&&n.addShadowRoot(this.shadowRoot,r),l}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}};function yr(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Ir(t,e,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function s(d){try{c(n.next(d))}catch(u){l(u)}}function o(d){try{c(n.throw(d))}catch(u){l(u)}}function c(d){d.done?a(d.value):i(d.value).then(s,o)}c((n=n.apply(t,e||[])).next())})}var Re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Ue=0;Ue<Re.length;Ue++)Dn[Re.charCodeAt(Ue)]=Ue;var Ue,Cr=function(t){var e=new Uint8Array(t),r,n=e.length,i="";for(r=0;r<n;r+=3)i+=Re[e[r]>>2],i+=Re[(e[r]&3)<<4|e[r+1]>>4],i+=Re[(e[r+1]&15)<<2|e[r+2]>>6],i+=Re[e[r+2]&63];return n%3===2?i=i.substring(0,i.length-1)+"=":n%3===1&&(i=i.substring(0,i.length-2)+"=="),i};var vr=new Map;function Fn(t,e){let r=vr.get(t);return r||(r=new Map,vr.set(t,r)),r.has(e)||r.set(e,[]),r.get(e)}var Dt=(t,e,r)=>{if(!t||!(Sr(t,e)||typeof t=="object"))return;let n=t.constructor.name,i=Fn(r,n),a=i.indexOf(t);return a===-1&&(a=i.length,i.push(t)),a};function ot(t,e,r){if(t instanceof Array)return t.map(n=>ot(n,e,r));if(t===null)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer){let n=t.constructor.name,i=Cr(t);return{rr_type:n,base64:i}}else{if(t instanceof DataView)return{rr_type:t.constructor.name,args:[ot(t.buffer,e,r),t.byteOffset,t.byteLength]};if(t instanceof HTMLImageElement){let n=t.constructor.name,{src:i}=t;return{rr_type:n,src:i}}else if(t instanceof HTMLCanvasElement){let n="HTMLImageElement",i=t.toDataURL();return{rr_type:n,src:i}}else{if(t instanceof ImageData)return{rr_type:t.constructor.name,args:[ot(t.data,e,r),t.width,t.height]};if(Sr(t,e)||typeof t=="object"){let n=t.constructor.name,i=Dt(t,e,r);return{rr_type:n,index:i}}}}return t}var at=(t,e,r)=>[...t].map(n=>ot(n,e,r)),Sr=(t,e)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(i=>typeof e[i]=="function").find(i=>t instanceof e[i]);function br(t,e,r,n){let i=[],a=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(let l of a)try{if(typeof e.CanvasRenderingContext2D.prototype[l]!="function")continue;let s=ne(e.CanvasRenderingContext2D.prototype,l,function(o){return function(...c){return x(this.canvas,r,n,!0)||setTimeout(()=>{let d=at([...c],e,this);t(this.canvas,{type:ce["2D"],property:l,args:d})},0),o.apply(this,c)}});i.push(s)}catch{let o=Ce(e.CanvasRenderingContext2D.prototype,l,{set(c){t(this.canvas,{type:ce["2D"],property:l,args:[c],setter:!0})}});i.push(o)}return()=>{i.forEach(l=>l())}}function Bn(t){return t==="experimental-webgl"?"webgl":t}function Ft(t,e,r,n){let i=[];try{let a=ne(t.HTMLCanvasElement.prototype,"getContext",function(l){return function(s,...o){if(!x(this,e,r,!0)){let c=Bn(s);if("__context"in this||(this.__context=c),n&&["webgl","webgl2"].includes(c))if(o[0]&&typeof o[0]=="object"){let d=o[0];d.preserveDrawingBuffer||(d.preserveDrawingBuffer=!0)}else o.splice(0,1,{preserveDrawingBuffer:!0})}return l.apply(this,[s,...o])}});i.push(a)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(a=>a())}}function Ar(t,e,r,n,i,a,l){let s=[],o=Object.getOwnPropertyNames(t);for(let c of o)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(c))try{if(typeof t[c]!="function")continue;let d=ne(t,c,function(u){return function(...f){let p=u.apply(this,f);if(Dt(p,l,this),"tagName"in this.canvas&&!x(this.canvas,n,i,!0)){let h=at([...f],l,this),g={type:e,property:c,args:h};r(this.canvas,g)}return p}});s.push(d)}catch{let u=Ce(t,c,{set(f){r(this.canvas,{type:e,property:c,args:[f],setter:!0})}});s.push(u)}return s}function wr(t,e,r,n,i){let a=[];return a.push(...Ar(e.WebGLRenderingContext.prototype,ce.WebGL,t,r,n,i,e)),typeof e.WebGL2RenderingContext<"u"&&a.push(...Ar(e.WebGL2RenderingContext.prototype,ce.WebGL2,t,r,n,i,e)),()=>{a.forEach(l=>l())}}function Wn(t,e){var r=atob(t);if(e){for(var n=new Uint8Array(r.length),i=0,a=r.length;i<a;++i)n[i]=r.charCodeAt(i);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return r}function Un(t,e,r){var n=e===void 0?null:e,i=r===void 0?!1:r,a=Wn(t,i),l=a.indexOf(`
`,10)+1,s=a.substring(l)+(n?"//# sourceMappingURL="+n:""),o=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(o)}function kr(t,e,r){var n;return function(a){return n=n||Un(t,e,r),new Worker(n,a)}}var Tr=kr("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",null,!1);var st=class{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(o,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(o)||this.pendingCanvasMutations.set(o,[]),this.pendingCanvasMutations.get(o).push(c)};let{sampling:r="all",win:n,blockClass:i,blockSelector:a,recordCanvas:l,dataURLOptions:s}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,l&&r==="all"&&this.initCanvasMutationObserver(n,i,a),l&&typeof r=="number"&&this.initCanvasFPSObserver(r,n,i,a,{dataURLOptions:s})}initCanvasFPSObserver(e,r,n,i,a){let l=Ft(r,n,i,!0),s=new Map,o=new Tr;o.onmessage=h=>{let{id:g}=h.data;if(s.set(g,!1),!("base64"in h.data))return;let{base64:I,type:A,width:y,height:m}=h.data;this.mutationCb({id:g,type:ce["2D"],commands:[{property:"clearRect",args:[0,0,y,m]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:I}],type:A}]},0,0]}]})};let c=1e3/e,d=0,u,f=()=>{let h=[];return r.document.querySelectorAll("canvas").forEach(g=>{x(g,n,i,!0)||h.push(g)}),h},p=h=>{if(d&&h-d<c){u=requestAnimationFrame(p);return}d=h,f().forEach(g=>Ir(this,void 0,void 0,function*(){var I;let A=this.mirror.getId(g);if(s.get(A))return;if(s.set(A,!0),["webgl","webgl2"].includes(g.__context)){let m=g.getContext(g.__context);((I=m?.getContextAttributes())===null||I===void 0?void 0:I.preserveDrawingBuffer)===!1&&m.clear(m.COLOR_BUFFER_BIT)}let y=yield createImageBitmap(g);o.postMessage({id:A,bitmap:y,width:g.width,height:g.height,dataURLOptions:a.dataURLOptions},[y])})),u=requestAnimationFrame(p)};u=requestAnimationFrame(p),this.resetObservers=()=>{l(),cancelAnimationFrame(u)}}initCanvasMutationObserver(e,r,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();let i=Ft(e,r,n,!1),a=br(this.processMutation.bind(this),e,r,n),l=wr(this.processMutation.bind(this),e,r,n,this.mirror);this.resetObservers=()=>{i(),a(),l()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let e=r=>{this.rafStamps.latestId=r,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,r)=>{let n=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,r){if(this.frozen||this.locked)return;let n=this.pendingCanvasMutations.get(e);if(!n||r===-1)return;let i=n.map(l=>yr(l,["type"])),{type:a}=n[0];this.mutationCb({id:r,type:a,commands:i}),this.pendingCanvasMutations.delete(e)}};var lt=class{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new He,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,r){if(e.length===0)return;let n={id:r,styleIds:[]},i=[];for(let a of e){let l;if(this.styleMirror.has(a))l=this.styleMirror.getId(a);else{l=this.styleMirror.add(a);let s=Array.from(a.rules||CSSRule);i.push({styleId:l,rules:s.map((o,c)=>({rule:St(o),index:c}))})}n.styleIds.push(l)}i.length>0&&(n.styles=i),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}};var ct=class{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(e,r){let n=this.nodeMap.get(e);return n&&Array.from(n).some(i=>i!==r)}add(e,r){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(r))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}};function W(t){return Object.assign(Object.assign({},t),{timestamp:Te()})}var L,dt,Bt,ut=!1,te=tr();function ve(t={}){let{emit:e,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:i="rr-block",blockSelector:a=null,ignoreClass:l="rr-ignore",ignoreSelector:s=null,maskTextClass:o="rr-mask",maskTextSelector:c=null,inlineStylesheet:d=!0,maskAllInputs:u,maskInputOptions:f,slimDOMOptions:p,maskInputFn:h,maskTextFn:g,hooks:I,packFn:A,sampling:y={},dataURLOptions:m={},mousemoveWait:R,recordCanvas:O=!1,recordCrossOriginIframes:B=!1,recordAfter:D=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:k=!1,collectFonts:K=!1,inlineImages:P=!1,plugins:V,keepIframeSrcFn:j=()=>!1,ignoreCSSAttributes:z=new Set([]),errorHandler:de}=t;hr(de);let E=B?window.parent===window:!0,H=!1;if(!E)try{window.parent.document&&(H=!1)}catch{H=!0}if(E&&!e)throw new Error("emit function is required");R!==void 0&&y.mousemove===void 0&&(y.mousemove=R),te.reset();let X=u===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:f!==void 0?f:{password:!0},q=p===!0||p==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:p==="all",headMetaDescKeywords:p==="all"}:p||{};or();let Y,J=0,Q=C=>{for(let _ of V||[])_.eventProcessor&&(C=_.eventProcessor(C));return A&&!H&&(C=A(C)),C};L=(C,_)=>{var w;if(!((w=he[0])===null||w===void 0)&&w.isFrozen()&&C.type!==b.FullSnapshot&&!(C.type===b.IncrementalSnapshot&&C.data.source===S.Mutation)&&he.forEach(U=>U.unfreeze()),E)e?.(Q(C),_);else if(H){let U={type:"rrweb",event:Q(C),origin:window.location.origin,isCheckout:_};window.parent.postMessage(U,"*")}if(C.type===b.FullSnapshot)Y=C,J=0;else if(C.type===b.IncrementalSnapshot){if(C.data.source===S.Mutation&&C.data.isAttachIframe)return;J++;let U=n&&J>=n,fe=r&&C.timestamp-Y.timestamp>r;(U||fe)&&dt(!0)}};let M=C=>{L(W({type:b.IncrementalSnapshot,data:Object.assign({source:S.Mutation},C)}))},Se=C=>L(W({type:b.IncrementalSnapshot,data:Object.assign({source:S.Scroll},C)})),Ee=C=>L(W({type:b.IncrementalSnapshot,data:Object.assign({source:S.CanvasMutation},C)})),Ve=C=>L(W({type:b.IncrementalSnapshot,data:Object.assign({source:S.AdoptedStyleSheet},C)})),$=new lt({mutationCb:M,adoptedStyleSheetCb:Ve}),re=new nt({mirror:te,mutationCb:M,stylesheetManager:$,recordCrossOriginIframes:B,wrappedEmit:L});for(let C of V||[])C.getMirror&&C.getMirror({nodeMirror:te,crossOriginIframeMirror:re.crossOriginIframeMirror,crossOriginIframeStyleMirror:re.crossOriginIframeStyleMirror});let pe=new ct;Bt=new st({recordCanvas:O,mutationCb:Ee,win:window,blockClass:i,blockSelector:a,mirror:te,sampling:y.canvas,dataURLOptions:m});let ee=new it({mutationCb:M,scrollCb:Se,bypassOptions:{blockClass:i,blockSelector:a,maskTextClass:o,maskTextSelector:c,inlineStylesheet:d,maskInputOptions:X,dataURLOptions:m,maskTextFn:g,maskInputFn:h,recordCanvas:O,inlineImages:P,sampling:y,slimDOMOptions:q,iframeManager:re,stylesheetManager:$,canvasManager:Bt,keepIframeSrcFn:j,processedNodeManager:pe},mirror:te});dt=(C=!1)=>{L(W({type:b.Meta,data:{href:window.location.href,width:Ye(),height:ze()}}),C),$.reset(),ee.init(),he.forEach(w=>w.lock());let _=rr(document,{mirror:te,blockClass:i,blockSelector:a,maskTextClass:o,maskTextSelector:c,inlineStylesheet:d,maskAllInputs:X,maskTextFn:g,slimDOM:q,dataURLOptions:m,recordCanvas:O,inlineImages:P,onSerialize:w=>{je(w,te)&&re.addIframe(w),Xe(w,te)&&$.trackLinkElement(w),De(w)&&ee.addShadowRoot(w.shadowRoot,document)},onIframeLoad:(w,U)=>{re.attachIframe(w,U),ee.observeAttachShadow(w)},onStylesheetLoad:(w,U)=>{$.attachLinkElement(w,U)},keepIframeSrcFn:j});if(!_)return console.warn("Failed to snapshot the document");L(W({type:b.FullSnapshot,data:{node:_,initialOffset:Ke(window)}}),C),he.forEach(w=>w.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&$.adoptStyleSheets(document.adoptedStyleSheets,te.getId(document))};try{let C=[],_=U=>{var fe;return v(mr)({mutationCb:M,mousemoveCb:(N,It)=>L(W({type:b.IncrementalSnapshot,data:{source:It,positions:N}})),mouseInteractionCb:N=>L(W({type:b.IncrementalSnapshot,data:Object.assign({source:S.MouseInteraction},N)})),scrollCb:Se,viewportResizeCb:N=>L(W({type:b.IncrementalSnapshot,data:Object.assign({source:S.ViewportResize},N)})),inputCb:N=>L(W({type:b.IncrementalSnapshot,data:Object.assign({source:S.Input},N)})),mediaInteractionCb:N=>L(W({type:b.IncrementalSnapshot,data:Object.assign({source:S.MediaInteraction},N)})),styleSheetRuleCb:N=>L(W({type:b.IncrementalSnapshot,data:Object.assign({source:S.StyleSheetRule},N)})),styleDeclarationCb:N=>L(W({type:b.IncrementalSnapshot,data:Object.assign({source:S.StyleDeclaration},N)})),canvasMutationCb:Ee,fontCb:N=>L(W({type:b.IncrementalSnapshot,data:Object.assign({source:S.Font},N)})),selectionCb:N=>{L(W({type:b.IncrementalSnapshot,data:Object.assign({source:S.Selection},N)}))},blockClass:i,ignoreClass:l,ignoreSelector:s,maskTextClass:o,maskTextSelector:c,maskInputOptions:X,inlineStylesheet:d,sampling:y,recordCanvas:O,inlineImages:P,userTriggeredOnInput:k,collectFonts:K,doc:U,maskInputFn:h,maskTextFn:g,keepIframeSrcFn:j,blockSelector:a,slimDOMOptions:q,dataURLOptions:m,mirror:te,iframeManager:re,stylesheetManager:$,shadowDomManager:ee,processedNodeManager:pe,canvasManager:Bt,ignoreCSSAttributes:z,plugins:((fe=V?.filter(N=>N.observer))===null||fe===void 0?void 0:fe.map(N=>({observer:N.observer,options:N.options,callback:It=>L(W({type:b.Plugin,data:{plugin:N.name,payload:It}}))})))||[]},I)};re.addLoadListener(U=>{try{C.push(_(U.contentDocument))}catch(fe){console.warn(fe)}});let w=()=>{dt(),C.push(_(document)),ut=!0};return document.readyState==="interactive"||document.readyState==="complete"?w():(C.push(G("DOMContentLoaded",()=>{L(W({type:b.DomContentLoaded,data:{}})),D==="DOMContentLoaded"&&w()})),C.push(G("load",()=>{L(W({type:b.Load,data:{}})),D==="load"&&w()},window))),()=>{C.forEach(U=>U()),pe.destroy(),ut=!1,pr()}}catch(C){console.warn(C)}}ve.addCustomEvent=(t,e)=>{if(!ut)throw new Error("please add custom event after start recording");L(W({type:b.Custom,data:{tag:t,payload:e}}))};ve.freezePage=()=>{he.forEach(t=>t.freeze())};ve.takeFullSnapshot=t=>{if(!ut)throw new Error("please take full snapshot after start recording");dt(t)};ve.mirror=te;var ht=class{constructor(e,r,n){this.isRecording=!1;this.eventBuffer=[];this.config=e,this.userId=r,this.sendBatch=n}async initialize(){this.config.enableSessionReplay&&this.startRecording()}startRecording(){if(this.isRecording||!this.config.enableSessionReplay){console.log("[Session Replay] Cannot start recording:",{isRecording:this.isRecording,enableSessionReplay:this.config.enableSessionReplay});return}console.log("[Session Replay] Starting recording at",new Date().toISOString()),console.log("[Session Replay] Document ready state:",document.readyState);try{this.stopRecordingFn=ve({emit:e=>{let n={0:"DOMContentLoaded",1:"Load",2:"FullSnapshot",3:"IncrementalSnapshot",4:"Meta",5:"Custom",6:"Plugin"}[e.type]||`Unknown(${e.type})`;console.log(`[Session Replay] Event collected: Type ${e.type} (${n}) at ${new Date(e.timestamp||Date.now()).toISOString()}`),this.addEvent({type:e.type,data:e.data,timestamp:e.timestamp||Date.now()})},recordCanvas:!0,collectFonts:!0,checkoutEveryNms:3e4,checkoutEveryNth:200,maskAllInputs:!0,maskInputOptions:{password:!0,email:!0},slimDOMOptions:{script:!1,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0},sampling:{mousemove:!1,mouseInteraction:!0,scroll:150,input:"last"}}),this.isRecording=!0,this.setupBatchTimer(),console.log("Session replay recording started")}catch(e){console.error("Failed to start session replay recording:",e)}}stopRecording(){this.isRecording&&(this.stopRecordingFn&&this.stopRecordingFn(),this.isRecording=!1,this.clearBatchTimer(),this.eventBuffer.length>0&&this.flushEvents(),console.log("Session replay recording stopped"))}isActive(){return this.isRecording}addEvent(e){this.eventBuffer.push(e),console.log(`[Session Replay] Event added to buffer (${this.eventBuffer.length}/${this.config.sessionReplayBatchSize})`),this.eventBuffer.length>=this.config.sessionReplayBatchSize&&(console.log(`[Session Replay] Buffer full, flushing ${this.eventBuffer.length} events`),this.flushEvents())}setupBatchTimer(){this.clearBatchTimer(),this.batchTimer=window.setInterval(()=>{this.eventBuffer.length>0&&(console.log(`[Session Replay] Timer triggered, flushing ${this.eventBuffer.length} events`),this.flushEvents())},this.config.sessionReplayBatchInterval)}clearBatchTimer(){this.batchTimer&&(clearInterval(this.batchTimer),this.batchTimer=void 0)}async flushEvents(){if(this.eventBuffer.length===0)return;let e=[...this.eventBuffer];this.eventBuffer=[],console.log(`[Session Replay] Sending batch with ${e.length} events to server`),console.log("[Session Replay] Event types in batch:",e.map(n=>`Type ${n.type}`).join(", ")),console.log("[Session Replay] Batch size:",JSON.stringify(e).length,"characters");let r={userId:this.userId,events:e,metadata:{pageUrl:window.location.href,viewportWidth:screen.width,viewportHeight:screen.height,language:navigator.language}};try{await this.sendBatch(r),console.log(`[Session Replay] Successfully sent batch with ${e.length} events`)}catch(n){console.error("Failed to send session replay batch:",n),console.error("Failed batch details:",{eventCount:e.length,eventTypes:e.map(i=>i.type),batchSize:JSON.stringify(r).length,userId:this.userId,url:window.location.href}),console.log(`[Session Replay] Re-queuing ${e.length} failed events for retry`),this.eventBuffer.unshift(...e)}}updateUserId(e){this.userId=e}onPageChange(){this.isRecording&&this.flushEvents()}cleanup(){this.stopRecording()}};var pt=class{constructor(e){this.customUserId=null;this.config=e,this.loadUserId(),e.enableSessionReplay&&this.initializeSessionReplay()}loadUserId(){try{let e=localStorage.getItem("rybbit-user-id");e&&(this.customUserId=e)}catch{}}async initializeSessionReplay(){try{this.sessionReplayRecorder=new ht(this.config,this.customUserId||"",e=>this.sendSessionReplayBatch(e)),await this.sessionReplayRecorder.initialize()}catch(e){console.error("Failed to initialize session replay:",e)}}async sendSessionReplayBatch(e){try{await fetch(`${this.config.analyticsHost}/session-replay/record/${this.config.siteId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),mode:"cors",keepalive:!1})}catch(r){throw console.error("Failed to send session replay batch:",r),r}}createBasePayload(){let e=new URL(window.location.href),r=e.pathname;if(e.hash&&e.hash.startsWith("#/")&&(r=e.hash.substring(1)),Ct(r,this.config.skipPatterns))return null;let n=Ct(r,this.config.maskPatterns);n&&(r=n);let i={site_id:this.config.siteId,hostname:e.hostname,pathname:r,querystring:this.config.trackQuerystring?e.search:"",screenWidth:screen.width,screenHeight:screen.height,language:navigator.language,page_title:document.title,referrer:document.referrer};return this.customUserId&&(i.user_id=this.customUserId),this.config.apiKey&&(i.api_key=this.config.apiKey),i}async sendTrackingData(e){try{await fetch(`${this.config.analyticsHost}/track`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),mode:"cors",keepalive:!0})}catch(r){console.error("Failed to send tracking data:",r)}}track(e,r="",n={}){if(e==="custom_event"&&(!r||typeof r!="string")){console.error("Event name is required and must be a string for custom events");return}let i=this.createBasePayload();if(!i)return;let a={...i,type:e,event_name:r,properties:e==="custom_event"||e==="outbound"||e==="error"?JSON.stringify(n):void 0};this.sendTrackingData(a)}trackPageview(){this.track("pageview")}trackEvent(e,r={}){this.track("custom_event",e,r)}trackOutbound(e,r="",n="_self"){this.track("outbound","",{url:e,text:r,target:n})}trackWebVitals(e){let r=this.createBasePayload();if(!r)return;let n={...r,type:"performance",event_name:"web-vitals",...e};this.sendTrackingData(n)}trackError(e,r={}){let n=window.location.origin,i=r.filename||"",a=e.stack||"";if(i)try{if(new URL(i).origin!==n)return}catch{}else if(a&&!a.includes(n))return;let l={message:e.message?.substring(0,500)||"Unknown error",stack:a.substring(0,2e3)||""};if(i&&(l.fileName=i),r.lineno){let s=typeof r.lineno=="string"?parseInt(r.lineno,10):r.lineno;s&&s!==0&&(l.lineNumber=s)}if(r.colno){let s=typeof r.colno=="string"?parseInt(r.colno,10):r.colno;s&&s!==0&&(l.columnNumber=s)}for(let s in r)!["lineno","colno"].includes(s)&&r[s]!==void 0&&(l[s]=r[s]);this.track("error",e.name||"Error",l)}identify(e){if(typeof e!="string"||e.trim()===""){console.error("User ID must be a non-empty string");return}this.customUserId=e.trim();try{localStorage.setItem("rybbit-user-id",this.customUserId)}catch{console.warn("Could not persist user ID to localStorage")}this.sessionReplayRecorder&&this.sessionReplayRecorder.updateUserId(this.customUserId)}clearUserId(){this.customUserId=null;try{localStorage.removeItem("rybbit-user-id")}catch{}}getUserId(){return this.customUserId}startSessionReplay(){this.sessionReplayRecorder?this.sessionReplayRecorder.startRecording():console.warn("Session replay not initialized")}stopSessionReplay(){this.sessionReplayRecorder&&this.sessionReplayRecorder.stopRecording()}isSessionReplayActive(){return this.sessionReplayRecorder?.isActive()??!1}onPageChange(){this.sessionReplayRecorder&&this.sessionReplayRecorder.onPageChange()}cleanup(){this.sessionReplayRecorder&&this.sessionReplayRecorder.cleanup()}};var Br=-1,Ne=t=>{addEventListener("pageshow",e=>{e.persisted&&(Br=e.timeStamp,t(e))},!0)},oe=(t,e,r,n)=>{let i,a;return l=>{e.value>=0&&(l||n)&&(a=e.value-(i??0),(a||i===void 0)&&(i=e.value,e.delta=a,e.rating=((s,o)=>s>o[1]?"poor":s>o[0]?"needs-improvement":"good")(e.value,r),t(e)))}},Ht=t=>{requestAnimationFrame(()=>requestAnimationFrame(()=>t()))},Kt=()=>{let t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Pe=()=>Kt()?.activationStart??0,ae=(t,e=-1)=>{let r=Kt(),n="navigate";return Br>=0?n="back-forward-cache":r&&(document.prerendering||Pe()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:n}},Wt=new WeakMap;function zt(t,e){return Wt.get(t)||Wt.set(t,new e),Wt.get(t)}var Pt=class{constructor(){se(this,"t");se(this,"i",0);se(this,"o",[])}h(e){if(e.hadRecentInput)return;let r=this.o[0],n=this.o.at(-1);this.i&&r&&n&&e.startTime-n.startTime<1e3&&e.startTime-r.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}},Ge=(t,e,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){let n=new PerformanceObserver(i=>{Promise.resolve().then(()=>{e(i.getEntries())})});return n.observe({type:t,buffered:!0,...r}),n}}catch{}},Yt=t=>{let e=!1;return()=>{e||(t(),e=!0)}},Me=-1,Rr=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,gt=t=>{document.visibilityState==="hidden"&&Me>-1&&(Me=t.type==="visibilitychange"?t.timeStamp:0,Gn())},Mr=()=>{addEventListener("visibilitychange",gt,!0),addEventListener("prerenderingchange",gt,!0)},Gn=()=>{removeEventListener("visibilitychange",gt,!0),removeEventListener("prerenderingchange",gt,!0)},Wr=()=>{if(Me<0){let t=Pe();Me=(document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(r=>r.name==="hidden"&&r.startTime>t)[0]?.startTime)??Rr(),Mr(),Ne(()=>{setTimeout(()=>{Me=Rr(),Mr()})})}return{get firstHiddenTime(){return Me}}},mt=t=>{document.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},Nr=[1800,3e3],Jt=(t,e={})=>{mt(()=>{let r=Wr(),n,i=ae("FCP"),a=Ge("paint",l=>{for(let s of l)s.name==="first-contentful-paint"&&(a.disconnect(),s.startTime<r.firstHiddenTime&&(i.value=Math.max(s.startTime-Pe(),0),i.entries.push(s),n(!0)))});a&&(n=oe(t,i,Nr,e.reportAllChanges),Ne(l=>{i=ae("FCP"),n=oe(t,i,Nr,e.reportAllChanges),Ht(()=>{i.value=performance.now()-l.timeStamp,n(!0)})}))})},Er=[.1,.25],Ur=(t,e={})=>{Jt(Yt(()=>{let r,n=ae("CLS",0),i=zt(e,Pt),a=s=>{for(let o of s)i.h(o);i.i>n.value&&(n.value=i.i,n.entries=i.o,r())},l=Ge("layout-shift",a);l&&(r=oe(t,n,Er,e.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(a(l.takeRecords()),r(!0))}),Ne(()=>{i.i=0,n=ae("CLS",0),r=oe(t,n,Er,e.reportAllChanges),Ht(()=>r())}),setTimeout(r))}))},Pr=0,Ut=1/0,ft=0,Vn=t=>{for(let e of t)e.interactionId&&(Ut=Math.min(Ut,e.interactionId),ft=Math.max(ft,e.interactionId),Pr=ft?(ft-Ut)/7+1:0)},Gt,Or=()=>Gt?Pr:performance.interactionCount??0,Zn=()=>{"interactionCount"in performance||Gt||(Gt=Ge("event",Vn,{type:"event",buffered:!0,durationThreshold:0}))},xr=0,Vt=class{constructor(){se(this,"u",[]);se(this,"l",new Map);se(this,"m");se(this,"v")}p(){xr=Or(),this.u.length=0,this.l.clear()}P(){let e=Math.min(this.u.length-1,Math.floor((Or()-xr)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&e.entryType!=="first-input")return;let r=this.u.at(-1),n=this.l.get(e.interactionId);if(n||this.u.length<10||e.duration>r.T){if(n?e.duration>n.T?(n.entries=[e],n.T=e.duration):e.duration===n.T&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],T:e.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort((i,a)=>a.T-i.T),this.u.length>10){let i=this.u.splice(10);for(let a of i)this.l.delete(a.id)}this.v?.(n)}}},Gr=t=>{let e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(t=Yt(t),document.addEventListener("visibilitychange",t,{once:!0}),e(()=>{t(),document.removeEventListener("visibilitychange",t)}))},Lr=[200,500],Vr=(t,e={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&mt(()=>{Zn();let r,n=ae("INP"),i=zt(e,Vt),a=s=>{Gr(()=>{for(let c of s)i.h(c);let o=i.P();o&&o.T!==n.value&&(n.value=o.T,n.entries=o.entries,r())})},l=Ge("event",a,{durationThreshold:e.durationThreshold??40});r=oe(t,n,Lr,e.reportAllChanges),l&&(l.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(a(l.takeRecords()),r(!0))}),Ne(()=>{i.p(),n=ae("INP"),r=oe(t,n,Lr,e.reportAllChanges)}))})},Zt=class{constructor(){se(this,"m")}h(e){this.m?.(e)}},Dr=[2500,4e3],Zr=(t,e={})=>{mt(()=>{let r=Wr(),n,i=ae("LCP"),a=zt(e,Zt),l=o=>{e.reportAllChanges||(o=o.slice(-1));for(let c of o)a.h(c),c.startTime<r.firstHiddenTime&&(i.value=Math.max(c.startTime-Pe(),0),i.entries=[c],n())},s=Ge("largest-contentful-paint",l);if(s){n=oe(t,i,Dr,e.reportAllChanges);let o=Yt(()=>{l(s.takeRecords()),s.disconnect(),n(!0)});for(let c of["keydown","click","visibilitychange"])addEventListener(c,()=>Gr(o),{capture:!0,once:!0});Ne(c=>{i=ae("LCP"),n=oe(t,i,Dr,e.reportAllChanges),Ht(()=>{i.value=performance.now()-c.timeStamp,n(!0)})})}})},Fr=[800,1800],_t=t=>{document.prerendering?mt(()=>_t(t)):document.readyState!=="complete"?addEventListener("load",()=>_t(t),!0):setTimeout(t)},_r=(t,e={})=>{let r=ae("TTFB"),n=oe(t,r,Fr,e.reportAllChanges);_t(()=>{let i=Kt();i&&(r.value=Math.max(i.responseStart-Pe(),0),r.entries=[i],n(!0),Ne(()=>{r=ae("TTFB",0),n=oe(t,r,Fr,e.reportAllChanges),n(!0)}))})};var yt=class{constructor(e){this.data={lcp:null,cls:null,inp:null,fcp:null,ttfb:null};this.sent=!1;this.timeout=null;this.onReadyCallback=null;this.onReadyCallback=e}initialize(){try{Zr(this.collectMetric.bind(this)),Ur(this.collectMetric.bind(this)),Vr(this.collectMetric.bind(this)),Jt(this.collectMetric.bind(this)),_r(this.collectMetric.bind(this)),this.timeout=setTimeout(()=>{this.sent||this.sendData()},2e4),window.addEventListener("beforeunload",()=>{this.sent||this.sendData()})}catch(e){console.warn("Error initializing web vitals tracking:",e)}}collectMetric(e){if(this.sent)return;let r=e.name.toLowerCase();this.data[r]=e.value,Object.values(this.data).every(i=>i!==null)&&this.sendData()}sendData(){this.sent||(this.sent=!0,this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.onReadyCallback&&this.onReadyCallback(this.data))}getData(){return{...this.data}}};(function(){let t=document.currentScript;if(!t){console.error("Could not find current script tag");return}if(window.__RYBBIT_OPTOUT__||localStorage.getItem("disable-rybbit")!==null){window.rybbit={pageview:()=>{},event:()=>{},trackOutbound:()=>{},identify:()=>{},clearUserId:()=>{},getUserId:()=>null,startSessionReplay:()=>{},stopSessionReplay:()=>{},isSessionReplayActive:()=>!1};return}let e=Xt(t);if(!e)return;let r=new pt(e);e.enableWebVitals&&new yt(s=>{r.trackWebVitals(s)}).initialize(),e.trackErrors&&(window.addEventListener("error",l=>{r.trackError(l.error||new Error(l.message),{filename:l.filename,lineno:l.lineno,colno:l.colno})}),window.addEventListener("unhandledrejection",l=>{let s=l.reason instanceof Error?l.reason:new Error(String(l.reason));r.trackError(s,{type:"unhandledrejection"})}));let n=()=>r.trackPageview(),i=e.debounceDuration>0?Qt(n,e.debounceDuration):n;function a(){if(document.addEventListener("click",function(l){let s=l.target;for(;s&&s!==document.documentElement;){if(s.hasAttribute("data-rybbit-event")){let o=s.getAttribute("data-rybbit-event");if(o){let c={};for(let d of s.attributes)if(d.name.startsWith("data-rybbit-prop-")){let u=d.name.replace("data-rybbit-prop-","");c[u]=d.value}r.trackEvent(o,c)}break}s=s.parentElement}if(e.trackOutbound){let o=l.target.closest("a");o?.href&&jt(o.href)&&r.trackOutbound(o.href,o.innerText||o.textContent||"",o.target||"_self")}}),e.autoTrackSpa){let l=history.pushState,s=history.replaceState;history.pushState=function(...o){l.apply(this,o),i(),r.onPageChange()},history.replaceState=function(...o){s.apply(this,o),i(),r.onPageChange()},window.addEventListener("popstate",()=>{i(),r.onPageChange()}),window.addEventListener("hashchange",()=>{i(),r.onPageChange()})}}window.rybbit={pageview:()=>r.trackPageview(),event:(l,s={})=>r.trackEvent(l,s),trackOutbound:(l,s="",o="_self")=>r.trackOutbound(l,s,o),identify:l=>r.identify(l),clearUserId:()=>r.clearUserId(),getUserId:()=>r.getUserId(),startSessionReplay:()=>r.startSessionReplay(),stopSessionReplay:()=>r.stopSessionReplay(),isSessionReplayActive:()=>r.isSessionReplayActive()},a(),window.addEventListener("beforeunload",()=>{r.cleanup()}),e.autoTrackPageview&&r.trackPageview()})();})();
/*! Bundled license information:

rrweb/es/rrweb/ext/tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
